# ğŸ¯ Piper å¤¹çˆªé›¶ç‚¹è®¾ç½®å®Œå…¨æŒ‡å—

## ğŸ“Œ ä»€ä¹ˆæ˜¯é›¶ç‚¹ï¼Ÿ

**é›¶ç‚¹**æ˜¯å¤¹çˆªä½ç½®çš„å‚è€ƒåŸºå‡†ç‚¹ã€‚å½“ä½ å‘é€ `GripperCtrl(0, ...)` æ—¶ï¼Œå¤¹çˆªä¼šç§»åŠ¨åˆ°è¿™ä¸ªé›¶ç‚¹ä½ç½®ã€‚

### é›¶ç‚¹çš„ä½œç”¨

æ‰€æœ‰çš„ä½ç½®å‘½ä»¤éƒ½æ˜¯**ç›¸å¯¹äºé›¶ç‚¹çš„è·ç¦»**ï¼š

```python
# å‡è®¾é›¶ç‚¹è®¾ç½®åœ¨å®Œå…¨é—­åˆä½ç½®
GripperCtrl(0, ...)      # ç§»åŠ¨åˆ°é›¶ç‚¹ï¼ˆé—­åˆï¼‰
GripperCtrl(10000, ...)  # ä»é›¶ç‚¹å¼ å¼€ 10mm
GripperCtrl(50000, ...)  # ä»é›¶ç‚¹å¼ å¼€ 50mm
```

## ğŸ”§ è®¾ç½®é›¶ç‚¹çš„ä¸¤ç§æ–¹æ³•

### æ–¹æ³•1ï¼šå®˜æ–¹æ ‡å‡†æ–¹æ³•ï¼ˆç®€å•ï¼‰

```python
from piper_sdk import C_PiperInterface_V2
import time

piper = C_PiperInterface_V2("can0")
piper.ConnectPort()

# æ­¥éª¤1: ç¦ç”¨å¤¹çˆª
piper.GripperCtrl(0, 1000, 0x00, 0)
time.sleep(1.5)

# æ­¥éª¤2: å°†å½“å‰ä½ç½®è®¾ä¸ºé›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0xAE)
#                               â†‘
#                           set_zero=0xAE
```

**âš ï¸ é‡è¦ï¼š** è¿™ä¼šå°†å¤¹çˆª**å½“å‰æ‰€åœ¨ä½ç½®**è®¾ä¸ºé›¶ç‚¹ï¼
- å¦‚æœå¤¹çˆªå½“å‰æ˜¯é—­åˆçš„ â†’ é›¶ç‚¹ = é—­åˆä½ç½® âœ…
- å¦‚æœå¤¹çˆªå½“å‰æ˜¯å¼ å¼€çš„ â†’ é›¶ç‚¹ = å¼ å¼€ä½ç½® âš ï¸

### æ–¹æ³•2ï¼šè‡ªå®šä¹‰æ–¹æ³•ï¼ˆæ¨èï¼‰â­

```python
from piper_sdk import C_PiperInterface_V2
import time

piper = C_PiperInterface_V2("can0")
piper.ConnectPort()

# æ­¥éª¤1: ä½¿èƒ½å¹¶åˆå§‹åŒ–å¤¹çˆª
piper.EnableArm(7)
# ... ç­‰å¾…ä½¿èƒ½æˆåŠŸ ...

piper.GripperCtrl(0, 1000, 0x02, 0)  # ç¦ç”¨å¹¶æ¸…é™¤é”™è¯¯
time.sleep(0.5)
piper.GripperCtrl(0, 1000, 0x01, 0)  # å¯ç”¨å¤¹çˆª
time.sleep(0.5)

# æ­¥éª¤2: ç§»åŠ¨å¤¹çˆªåˆ°æœŸæœ›çš„é›¶ç‚¹ä½ç½®
# ä¾‹å¦‚ï¼šå®Œå…¨é—­åˆä½ç½®ä½œä¸ºé›¶ç‚¹
for i in range(3):
    piper.GripperCtrl(0, 1000, 0x01, 0)  # å°½é‡é—­åˆ
    time.sleep(0.5)

# æ­¥éª¤3: ç¦ç”¨å¤¹çˆª
piper.GripperCtrl(0, 1000, 0x00, 0)
time.sleep(1.5)

# æ­¥éª¤4: è®¾ç½®é›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0xAE)
time.sleep(1)

print("âœ“ é›¶ç‚¹è®¾ç½®å®Œæˆï¼")
```

## ğŸ’¡ æ¨èçš„é›¶ç‚¹ä½ç½®

### âœ… æ¨èï¼šå®Œå…¨é—­åˆä½ç½®ä½œä¸ºé›¶ç‚¹

**åŸå› ï¼š**
- é€»è¾‘æ¸…æ™°ï¼š`0` = é—­åˆï¼Œæ•°å€¼è¶Šå¤§è¶Šæ‰“å¼€
- ä¸ç‰©ç†ç›´è§‰ä¸€è‡´
- ä¾¿äºç†è§£å’Œä½¿ç”¨

**è®¾ç½®æ–¹æ³•ï¼š**
```python
# 1. å…ˆè®©å¤¹çˆªå®Œå…¨é—­åˆ
for i in range(3):
    piper.GripperCtrl(0, 1000, 0x01, 0)
    time.sleep(0.5)

# 2. å°†æ­¤ä½ç½®è®¾ä¸ºé›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0)
time.sleep(1.5)
piper.GripperCtrl(0, 1000, 0x00, 0xAE)
```

### âŒ ä¸æ¨èï¼šå¼ å¼€ä½ç½®ä½œä¸ºé›¶ç‚¹

**åŸå› ï¼š**
- å®¹æ˜“æ··æ·†ï¼š`0` = æ‰“å¼€ï¼Ÿ
- ä¸ç›´è§‰ä¸ç¬¦
- å¢åŠ ç†è§£éš¾åº¦

## ğŸ” éªŒè¯é›¶ç‚¹è®¾ç½®

è®¾ç½®é›¶ç‚¹åï¼Œéœ€è¦éªŒè¯æ˜¯å¦æ­£ç¡®ï¼š

```python
# å¯ç”¨å¤¹çˆªå¹¶ç§»åŠ¨åˆ°é›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x01, 0)
time.sleep(2)

# è§‚å¯Ÿå¤¹çˆªä½ç½®
# å¦‚æœé›¶ç‚¹è®¾ç½®æ­£ç¡®ï¼Œå¤¹çˆªåº”è¯¥ç§»åŠ¨åˆ°ä½ è®¾ç½®çš„é›¶ç‚¹ä½ç½®
```

æµ‹è¯•ä¸åŒä½ç½®ï¼š

```python
# æµ‹è¯•é›¶ç‚¹ â†’ å¼ å¼€ â†’ é›¶ç‚¹ å¾ªç¯
positions = [0, 10000, 20000, 35000, 50000, 0]
for pos in positions:
    print(f"ç§»åŠ¨åˆ° {pos/1000}mm")
    piper.GripperCtrl(pos, 1000, 0x01, 0)
    time.sleep(2)
```

## ğŸš¨ ä½•æ—¶éœ€è¦é‡æ–°è®¾ç½®é›¶ç‚¹ï¼Ÿ

1. **é¦–æ¬¡ä½¿ç”¨å¤¹çˆªæ—¶** - å¿…é¡»è®¾ç½®
2. **å¤¹çˆªè¡Œç¨‹æ•°æ®å¼‚å¸¸æ—¶** - ä½ç½®åé¦ˆä¸å‡†ç¡®
3. **æ›´æ¢å¤¹çˆªå** - æ–°çš„å¤¹çˆªéœ€è¦é‡æ–°è®¾ç½®
4. **å¤¹çˆªä½ç½®ä¸å‘½ä»¤ä¸ç¬¦æ—¶** - é›¶ç‚¹å¯èƒ½ä¸¢å¤±

## ğŸ“Š å‚æ•°è¯¦è§£

### GripperCtrl å®Œæ•´å‚æ•°

```python
GripperCtrl(gripper_angle, gripper_effort, gripper_code, set_zero)
```

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `gripper_angle` | int | å¤¹çˆªä½ç½®ï¼Œå•ä½ 0.001mm<br>ä»é›¶ç‚¹å¼€å§‹çš„å¼ å¼€è·ç¦» |
| `gripper_effort` | int | æ‰­çŸ©ï¼Œå•ä½ 0.001N/m<br>é€šå¸¸ä½¿ç”¨ 1000 (1N/m) |
| `gripper_code` | hex | æ§åˆ¶ç ï¼š<br>0x00: ç¦ç”¨<br>0x01: å¯ç”¨<br>0x02: ç¦ç”¨å¹¶æ¸…é™¤é”™è¯¯<br>0x03: å¯ç”¨å¹¶æ¸…é™¤é”™è¯¯ |
| `set_zero` | hex | é›¶ç‚¹è®¾ç½®ï¼š<br>0x00: æ­£å¸¸æ¨¡å¼<br>**0xAE: è®¾ç½®å½“å‰ä½ç½®ä¸ºé›¶ç‚¹** |

### è®¾ç½®é›¶ç‚¹çš„å…³é”®å‚æ•°

```python
# æ­£å¸¸æ§åˆ¶ï¼ˆä¸è®¾ç½®é›¶ç‚¹ï¼‰
piper.GripperCtrl(position, 1000, 0x01, 0x00)
#                                         â†‘
#                                    set_zero=0x00

# è®¾ç½®é›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0xAE)
#                           â†‘     â†‘
#                    ç¦ç”¨å¤¹çˆª   è®¾ç½®é›¶ç‚¹
```

## ğŸ› ï¸ å®Œæ•´æ“ä½œç¤ºä¾‹

### ç¤ºä¾‹1ï¼šé¦–æ¬¡ä½¿ç”¨ï¼Œè®¾ç½®é›¶ç‚¹

```python
#!/usr/bin/env python3
from piper_sdk import C_PiperInterface_V2
import time

# è¿æ¥
piper = C_PiperInterface_V2("can0")
piper.ConnectPort()

# é…ç½®å¤¹çˆªå‚æ•°ï¼ˆé¦–æ¬¡ä½¿ç”¨å¿…é¡»ï¼‰
piper.GripperTeachingPendantParamConfig(100, 70)
piper.ArmParamEnquiryAndConfig(4)
time.sleep(1)

# ä½¿èƒ½æœºæ¢°è‡‚
piper.EnableArm(7)
time.sleep(2)

# åˆå§‹åŒ–å¤¹çˆª
piper.GripperCtrl(0, 1000, 0x02, 0)  # æ¸…é™¤é”™è¯¯
time.sleep(0.5)
piper.GripperCtrl(0, 1000, 0x01, 0)  # å¯ç”¨
time.sleep(0.5)

# ç§»åŠ¨åˆ°é—­åˆä½ç½®
print("ç§»åŠ¨åˆ°é—­åˆä½ç½®...")
for i in range(5):
    piper.GripperCtrl(0, 1000, 0x01, 0)
    time.sleep(0.5)

print("è®¾ç½®å½“å‰ä½ç½®ä¸ºé›¶ç‚¹...")
# ç¦ç”¨
piper.GripperCtrl(0, 1000, 0x00, 0)
time.sleep(1.5)

# è®¾ç½®é›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0xAE)
time.sleep(1)

print("âœ“ é›¶ç‚¹è®¾ç½®å®Œæˆï¼")

# éªŒè¯
print("éªŒè¯é›¶ç‚¹...")
piper.GripperCtrl(0, 1000, 0x01, 0)
time.sleep(2)
print("å¤¹çˆªåº”è¯¥åœ¨é—­åˆä½ç½®")
```

### ç¤ºä¾‹2ï¼šé›¶ç‚¹å¼‚å¸¸ï¼Œé‡æ–°è®¾ç½®

```python
#!/usr/bin/env python3
from piper_sdk import C_PiperInterface_V2
import time

piper = C_PiperInterface_V2("can0")
piper.ConnectPort()

print("é‡æ–°è®¾ç½®é›¶ç‚¹...")

# 1. ç¦ç”¨å¤¹çˆª
piper.GripperCtrl(0, 1000, 0x00, 0)
time.sleep(1.5)

# 2. è®¾ç½®å½“å‰ä½ç½®ä¸ºé›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0xAE)
time.sleep(1)

print("âœ“ é›¶ç‚¹å·²é‡ç½®ä¸ºå½“å‰ä½ç½®")
```

## ğŸ’» ä½¿ç”¨äº¤äº’å¼å·¥å…·

æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªäº¤äº’å¼é›¶ç‚¹è®¾ç½®å·¥å…·ï¼š

```bash
cd /home/robot/button/V4.0/project2
python3 set_gripper_zero_interactive.py
```

åŠŸèƒ½ï¼š
1. å®˜æ–¹æ ‡å‡†æ–¹æ³•è®¾ç½®é›¶ç‚¹
2. è‡ªå®šä¹‰æ–¹æ³•è®¾ç½®é›¶ç‚¹ï¼ˆå¯é€‰æ‹©ä½ç½®ï¼‰
3. æµ‹è¯•å½“å‰é›¶ç‚¹è®¾ç½®
4. æŸ¥çœ‹è¯¦ç»†è¯´æ˜

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **é›¶ç‚¹æ˜¯å‚è€ƒåŸºå‡†** - æ‰€æœ‰ä½ç½®éƒ½æ˜¯ç›¸å¯¹é›¶ç‚¹çš„è·ç¦»
2. **æ¨èé—­åˆä½ç½®ä½œä¸ºé›¶ç‚¹** - é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£
3. **`set_zero=0xAE`** - è¿™æ˜¯è®¾ç½®é›¶ç‚¹çš„å…³é”®å‚æ•°
4. **é›¶ç‚¹å¯ä»¥é‡æ–°è®¾ç½®** - éšæ—¶å¯ä»¥æ”¹å˜é›¶ç‚¹ä½ç½®

### å¿«é€Ÿè®¾ç½®æµç¨‹

```python
# 1. ç§»åŠ¨åˆ°æœŸæœ›çš„é›¶ç‚¹ä½ç½®
piper.GripperCtrl(0, 1000, 0x01, 0)  # ä¾‹å¦‚ï¼šé—­åˆä½ç½®

# 2. ç¦ç”¨ + è®¾ç½®é›¶ç‚¹
piper.GripperCtrl(0, 1000, 0x00, 0)     # ç¦ç”¨
time.sleep(1.5)
piper.GripperCtrl(0, 1000, 0x00, 0xAE)  # è®¾ç½®é›¶ç‚¹

# 3. éªŒè¯
piper.GripperCtrl(0, 1000, 0x01, 0)  # ç§»åŠ¨åˆ°é›¶ç‚¹
```

**é›¶ç‚¹è®¾ç½®å¥½åï¼Œ`GripperCtrl(0, ...)` å°±ä¼šè®©å¤¹çˆªå›åˆ°è¿™ä¸ªä½ç½®ï¼** ğŸ‰
